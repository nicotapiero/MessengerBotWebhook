<html>
  <head>
    <title>My Awesome Webview</title>
  </head>

  <body>
  	<script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {
        return;
      }
      js = d.createElement(s);
      js.id = id;
      js.src = "https://connect.facebook.com/en_US/messenger.Extensions.js";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'Messenger'));
    window.extAsyncInit = function() {
     // alert('loaded sdk');
     getUser();
    };
    function getUser() {
      MessengerExtensions.getUserID(function success(uids) {
        var psid = uids.psid;
        alert(JSON.stringify(psid));
        setUser(JSON.stringify(psid))
      }, function error(err, errorMessage) {
        alert(JSON.stringify(errorMessage));
         // return undefined;
      });
    }

    var user_psid;
    function setUser(string) {
      console.log('set user to: ' + string);
      user_psid = string;
      console.log('set user to: ' + user_psid);
    }

    function getLink() {
      var string = getUser();
      return "https://nicoswebhook.herokuapp.com/trade?id=" + parseInt(user_psid);
    }

   // function get




  </script>
  <input type="button" onclick="getUser()" value="Get user id" />


<button onclick="location.href = getLink();" id="myButton" class="float-left submit-button" >Home</button>

  </body>


<p> Select your pokemon to trade: </p>
  <form action="/action_page.php">
  First name: <input type="text" name="fname"><br>
  Last name: <input type="text" name="lname"><br>
  <input type="submit" value="Submit">
</form>
   
</html>